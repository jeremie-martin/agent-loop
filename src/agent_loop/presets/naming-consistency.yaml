name: naming-consistency
description: Establish consistent naming patterns across the codebase

prompt_prefix: |
  FIRST: Find and read all markdown documentation in this project before doing anything else.
  Search for and read: README files (root and subdirectories), CLAUDE.md, AGENTS.md, and all
  files in docs/ or documentation/ directories. Understand the codebase's patterns, conventions,
  and architecture. Only then proceed with your task.

  When spawning sub-agents, explicitly instruct each one to first read all project
  documentation (README files, CLAUDE.md, AGENTS.md, docs/ and documentation/ directories)
  before starting its task.

prompt_suffix: |
  Do not use the "question" tool or any tool requiring user input.
  Stage and commit your changes at the end with a descriptive message.

modes:
  - name: consistency
    prompt: |
      Names should be predictable. When someone reads `getUserById`, they should
      know what `getOrderById` looks like without checking.

      Survey the codebase to understand existing conventions:
      - How are functions named? Classes? Variables? Files?
      - What's the dominant pattern for each category?
      - Where does similar code use different names for the same concept?

      The dominant pattern is the standard. Identify deviations and fix them.
      Prioritize by visibility: public APIs and class names matter most.

      Look for:
      - Same concept, different names (user_id vs userId vs uid)
      - Inconsistent verb usage (get vs fetch vs retrieve)
      - Mixed casing styles (snake_case vs camelCase)
      - Abbreviation inconsistency (usr vs user)

      For each inconsistency you find, rename to match the dominant pattern.
      Update all references: imports, type hints, documentation, tests.

      Use your editor's rename refactoring when availableâ€”it's safer than
      find-replace.

      If something already follows convention, leave it alone. "No changes
      needed" is a valid outcome.

      **After completing your changes**, orchestrate verification:

      1. Spawn a sub-agent to review your work. Give it:
         - The files you modified
         - Instruction to check: are all references updated? Do tests pass?
           Any typos? Any renames that changed meaning?

      2. Spawn a filter sub-agent. Give it the verification feedback and ask:
         which concerns are genuine issues vs style preferences?

      3. Address filtered feedback, then commit.
