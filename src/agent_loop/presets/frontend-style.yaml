name: frontend-style
description: Establish coherent, centralized styling with self-orchestrated verification

prompt_prefix: |
  FIRST: Find and read all markdown documentation in this project before doing anything else.
  Search for and read: README files (root and subdirectories), CLAUDE.md, AGENTS.md, and all
  files in docs/ or documentation/ directories. Understand the codebase's patterns, conventions,
  and architecture. Only then proceed with your task.

  IMPORTANT - When spawning sub-agents:
  Sub-agents do not automatically have the context you have. For each sub-agent you spawn:
  1. Give it the exact file paths to relevant documentation (CLAUDE.md, README, etc.)
  2. Explicitly instruct it to read those files completely before starting its task
  3. Include any other specific files it needs to examine

  Do not assume sub-agents will find documentation on their own — give them the paths.

prompt_suffix: |
  Do not use the "question" tool or any tool requiring user input.
  Stage and commit your changes at the end with a descriptive message.
  Do not create markdown files, audit reports, or documentation.
  Only modify the actual source files (CSS, SCSS, JS, TSX, etc.).

modes:
  - name: tokens
    prompt: |
      A well-designed style system defines visual decisions in one place. When
      "primary blue" is defined once, changing it changes everything—and everything
      stays in sync.

      A good token system has:
      - Centralized definitions (CSS custom properties, theme file, or design tokens)
      - Systematic scales for spacing, typography, and color
      - Consistent, predictable naming conventions

      Establish or strengthen the centralized token system using whatever pattern
      fits the project. Colors become `--color-primary`, spacing becomes `--space-4`.

      Focus on creating a coherent system. Consolidate near-duplicates. Adjust scales
      to be systematic. Someone new should be able to look at the tokens and understand
      the logic.

      "No changes needed" is a valid outcome.

      **After completing your changes**, orchestrate verification:

      1. Spawn a sub-agent to review your work. Give it:
         - The paths to relevant documentation files and instruct it to read them first
         - The token files you created or modified
         - Instruction to check: are tokens well-organized? Naming consistent?
           Any duplicates or gaps in the scales?

      2. Spawn a filter sub-agent. Give it the verification feedback and ask:
         which concerns are genuine vs stylistic preference?

      3. Address filtered feedback, then commit.

  - name: adoption
    prompt: |
      A design system only works if the codebase uses it. Centralized tokens that
      nobody references are just documentation.

      Replace hardcoded values with token equivalents:
      - Colors: `#3b82f6` becomes `var(--color-primary)`
      - Spacing: `margin: 16px` becomes `margin: var(--space-4)`
      - Typography: `font-size: 14px` becomes the appropriate typography token

      When a value doesn't match any token exactly, use the closest existing token.
      New tokens should be exceptional—a design system with fewer tokens is more
      coherent than one that captures every shade.

      Focus on the most visible inconsistencies first. A few clear wins are better
      than touching every file. Verify each modified file still parses correctly.

      "No changes needed" is a valid outcome.

      **After completing your changes**, orchestrate verification:

      Spawn a sub-agent to review your work. Give it:
      - The paths to relevant documentation files and instruct it to read them first
      - The files you modified
      - Instruction to check: are all token references valid? Replacements consistent?
        Any CSS syntax errors?

      Address the feedback, then commit.
